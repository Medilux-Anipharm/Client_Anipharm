version: '3.8'

services:
  # Nginx를 통한 프론트엔드 서빙
  frontend:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: anipharm-frontend
    ports:
      - "8080:80"
    volumes:
      # 개발 모드에서 빌드된 파일을 직접 마운트하려면 주석 해제
      # - ./web-build:/usr/share/nginx/html:ro
      - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro
    depends_on:
      - backend
    networks:
      - anipharm-network
    restart: unless-stopped

  # 백엔드 서버 (프록시를 통해 접근)
  backend:
    # 백엔드 서버는 별도로 실행되거나 다른 docker-compose에서 실행
    # 여기서는 네트워크만 연결하기 위한 예시
    image: nginx:alpine
    container_name: anipharm-server
    # 실제로는 Server_Anipharm의 docker-compose와 연결되어야 함
    networks:
      - anipharm-network
    # 실제 백엔드 서버로 교체 필요

networks:
  anipharm-network:
    external: true
    # 또는
    # driver: bridge
